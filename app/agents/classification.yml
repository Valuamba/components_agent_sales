branch: classify_request
decisions:
  - point: classify_customer_request
    name: "Classify customer request"
    conditions:
      - condition: request_without_parts
        name: "Did customer leave request without specifying parts?"
        yes:
          - action: ask_to_specify_parts
      - condition: customer_send_request
        name: "Did the customer leave a request indicating specific parts?"
        yes:
          - action: classify_parts
          - action: send_commercial_offer
        no:
          - condition: is_this_first_message_from_customer
      - condition: customer_ask_change_quote
        name: "Did the customer ask to change parts in the quote?"
        yes:
          - action: classify_parts
          - action: send_commercial_offer
      - condition: customer_refuse_buy
        name: "Did the user refuse to buy?"
        yes:
          - action: notify_sales_lead
      - condition: customer_ask_discount
        name: "Is the customer asking for a discount?"
        yes:
          - branch: discount

      - condition: is_this_first_message_from_customer
        name: "Is it the first message from the customer?"
        yes:
          - condition: customer_send_request


actions:
  - action: classify_parts
    name: "Classify parts from request"

  - action: send_commercial_offer
    name: "Send commercial offer"
    break: true

  - action: notify_sales_lead
    name: "Notify sales lead manager"
    break: true

  - action: ask_to_specify_parts
    name: "Ask to specify parts"
    break: true
